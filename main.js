/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var m=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var x=(r,i)=>{for(var t in i)m(r,t,{get:i[t],enumerable:!0})},k=(r,i,t,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of O(i))!E.call(r,l)&&l!==t&&m(r,l,{get:()=>i[l],enumerable:!(e=I(i,l))||e.enumerable});return r};var A=r=>k(m({},"__esModule",{value:!0}),r);var D={};x(D,{default:()=>C});module.exports=A(D);var u=require("obsidian");var S={defaultCalloutType:"note",rememberLastType:!1,autoFocusContent:!0,lastUsedType:"note"},p=[{type:"note",label:"Note",icon:"lucide-pencil",color:"var(--callout-default)",source:"builtin",aliases:[]},{type:"abstract",label:"Abstract",icon:"lucide-clipboard-list",color:"var(--callout-summary)",source:"builtin",aliases:["summary","tldr"]},{type:"info",label:"Info",icon:"lucide-info",color:"var(--callout-info)",source:"builtin",aliases:[]},{type:"todo",label:"Todo",icon:"lucide-check-circle-2",color:"var(--callout-todo)",source:"builtin",aliases:[]},{type:"important",label:"Important",icon:"lucide-flame",color:"var(--callout-important)",source:"builtin",aliases:[]},{type:"tip",label:"Tip",icon:"lucide-flame",color:"var(--callout-tip)",source:"builtin",aliases:["hint"]},{type:"success",label:"Success",icon:"lucide-check",color:"var(--callout-success)",source:"builtin",aliases:["check","done"]},{type:"question",label:"Question",icon:"lucide-help-circle",color:"var(--callout-question)",source:"builtin",aliases:["help","faq"]},{type:"warning",label:"Warning",icon:"lucide-alert-triangle",color:"var(--callout-warning)",source:"builtin",aliases:["caution","attention"]},{type:"failure",label:"Failure",icon:"lucide-x",color:"var(--callout-fail)",source:"builtin",aliases:["fail","missing"]},{type:"danger",label:"Danger",icon:"lucide-zap",color:"var(--callout-error)",source:"builtin",aliases:["error"]},{type:"bug",label:"Bug",icon:"lucide-bug",color:"var(--callout-bug)",source:"builtin",aliases:[]},{type:"example",label:"Example",icon:"lucide-list",color:"var(--callout-example)",source:"builtin",aliases:[]},{type:"quote",label:"Quote",icon:"lucide-quote",color:"var(--callout-quote)",source:"builtin",aliases:["cite"]}];var a=require("obsidian");var y=class extends a.Modal{constructor(t,e){var o,s;super(t);this.config=e;this.title="";this.content="";this.collapse="none";this.allCalloutOptions=[];this.type=e.defaultType,this.autoFocusContent=e.autoFocusContent,this.containerEl.addClass("insert-callout-modal"),this.prepareCalloutOptions();let l=this.getEditor();if(l){let n=l.getSelection();n&&(this.content=n)}this.allCalloutOptions.find(n=>n.type===this.type)||(this.type=(s=(o=this.allCalloutOptions[0])==null?void 0:o.type)!=null?s:"note")}getEditor(){var t,e;return(e=(t=this.app.workspace.getActiveViewOfType(a.MarkdownView))==null?void 0:t.editor)!=null?e:null}prepareCalloutOptions(){for(let t of p)if(this.allCalloutOptions.push({type:t.type,label:t.label,icon:t.icon,color:t.color,source:"builtin"}),t.aliases)for(let e of t.aliases)this.allCalloutOptions.push({type:e,label:`${t.label} (${e})`,icon:t.icon,color:t.color,source:"builtin"})}onOpen(){this.display()}display(){let{contentEl:t}=this;t.empty(),t.addEventListener("keydown",o=>{o.key==="Enter"&&(o.ctrlKey||o.metaKey)&&(o.preventDefault(),this.insertButton&&this.insertButton.click())});let e=t.createDiv("callout-type-container");this.iconContainerEl=e.createDiv("callout-icon-container"),new a.Setting(e).setName("Callout type").addDropdown(o=>{var s,n;for(let c of this.allCalloutOptions)o.addOption(c.type,c.label);this.allCalloutOptions.some(c=>c.type===this.type)||(this.type=(n=(s=this.allCalloutOptions[0])==null?void 0:s.type)!=null?n:"note"),o.setValue(this.type),o.onChange(c=>{this.type=c,this.updateIconAndColor(this.iconContainerEl,c)})}),this.updateIconAndColor(this.iconContainerEl,this.type),new a.Setting(t).setName("Title").setDesc("Optional, leave blank for default title").addText(o=>{o.setPlaceholder("Input title").setValue(this.title).onChange(s=>{this.title=s})}),new a.Setting(t).setName("Collapse state").addDropdown(o=>{o.addOption("none","Default").addOption("open","Open").addOption("closed","Closed").setValue(this.collapse).onChange(s=>{this.collapse=s})}),new a.Setting(t).setName("Content").addTextArea(o=>{o.setPlaceholder("Input content").setValue(this.content).onChange(s=>{this.content=s}),o.inputEl.rows=5,o.inputEl.cols=40,this.contentTextArea=o.inputEl}),t.createDiv("insert-callout-shortcut-hint").setText(`${a.Platform.isMacOS?"\u2318":"Ctrl"} + Enter to insert`),new a.Setting(t).addButton(o=>(o.setButtonText("Insert").setCta().onClick(()=>{this.insertCallout(),this.close()}),this.insertButton=o.buttonEl,o)).addButton(o=>(o.setButtonText("Cancel").setTooltip("Cancel").onClick(()=>this.close()),o)),this.autoFocusContent&&setTimeout(()=>{this.contentTextArea&&this.contentTextArea.focus()},10)}updateIconAndColor(t,e){if(!t)return;let l=this.allCalloutOptions.find(o=>o.type===e);t.empty(),l?((0,a.setIcon)(t,l.icon),t.style.setProperty("--callout-color",l.color)):((0,a.setIcon)(t,"lucide-alert-circle"),t.style.removeProperty("--callout-color"))}insertCallout(){let t=this.getEditor();if(!t)return;let e=`> [!${this.type}]`;this.collapse!=="none"&&(e+=this.collapse==="open"?"+":"-"),this.title&&(e+=` ${this.title}`),e+=`
> ${this.content.replace(/\n/g,`
> `)}`;let l=t.getCursor(),o=t.getLine(l.line),s=l.ch===0,n;if(t.getSelection()){!s&&o.trim().length>0&&(e=`
`+e);let c=t.getCursor("from");t.replaceSelection(e);let g=e.split(`
`).length;n={line:c.line+g,ch:0}}else{!s&&o.trim().length>0&&(e=`
`+e),t.replaceRange(e,l);let c=e.split(`
`).length;n={line:l.line+c,ch:0}}setTimeout(()=>{t.replaceRange(`
`,n),t.setCursor({line:n.line+1,ch:0}),t.focus()},0)}};var d=require("obsidian");var h=class extends d.SuggestModal{constructor(t,e){super(t);this.allCalloutOptions=[];this.onChoose=e,this.setPlaceholder("Choose a callout type..."),this.prepareCalloutOptions()}prepareCalloutOptions(){for(let t of p)if(this.allCalloutOptions.push(t),t.aliases)for(let e of t.aliases)this.allCalloutOptions.push({type:e,label:`${t.label} (${e})`,icon:t.icon,color:t.color,source:"builtin"})}getSuggestions(t){let e=t.toLowerCase();return e?this.allCalloutOptions.filter(l=>l.type.toLowerCase().includes(e)||l.label.toLowerCase().includes(e)):this.allCalloutOptions}renderSuggestion(t,e){let l=e.createDiv({cls:"quick-pick-callout-item"}),o=l.createDiv({cls:"quick-pick-callout-icon"});(0,d.setIcon)(o,t.icon),o.style.setProperty("--callout-color",t.color),l.createDiv({cls:"quick-pick-callout-label",text:t.label})}onChooseSuggestion(t){this.onChoose(t.type)}static insertQuickCallout(t,e){var g,b;let l=(b=(g=t.workspace.getActiveViewOfType(d.MarkdownView))==null?void 0:g.editor)!=null?b:null;if(!l)return;let o=`> [!${e}]
> `,s=l.getCursor(),n=l.getLine(s.line),c=s.ch===0;if(l.getSelection()){let f=l.getSelection();o=`> [!${e}]
> ${f.replace(/\n/g,`
> `)}`,!c&&n.trim().length>0&&(o=`
`+o);let w=l.getCursor("from");l.replaceSelection(o);let L=o.split(`
`).length,v={line:w.line+L,ch:0};setTimeout(()=>{l.replaceRange(`
`,v),l.setCursor({line:v.line+1,ch:0}),l.focus()},0)}else{!c&&n.trim().length>0&&(o=`
`+o),l.replaceRange(o,s);let f=o.split(`
`).length;setTimeout(()=>{l.setCursor({line:s.line+f-1,ch:2}),l.focus()},0)}}};var C=class extends u.Plugin{async onload(){await this.loadSettings(),this.addCommand({id:"insert-callout",name:"Insert callout",editorCallback:()=>{let i=this.settings.rememberLastType?this.settings.lastUsedType:this.settings.defaultCalloutType,t=new y(this.app,{defaultType:i,autoFocusContent:this.settings.autoFocusContent}),e=t.close.bind(t);t.close=()=>{this.settings.rememberLastType&&t.type&&(this.settings.lastUsedType=t.type,this.saveSettings()),e()},t.open()}}),this.addCommand({id:"insert-callout-quick",name:"Insert callout (quick pick)",editorCallback:()=>{new h(this.app,t=>{h.insertQuickCallout(this.app,t),this.settings.rememberLastType&&(this.settings.lastUsedType=t,this.saveSettings())}).open()}}),this.addCommand({id:"open-settings",name:"Open settings",callback:()=>{let i=this.app.setting;i.open(),i.openTabById(this.manifest.id)}}),this.addSettingTab(new T(this.app,this))}async loadSettings(){this.settings=Object.assign({},S,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},T=class extends u.PluginSettingTab{constructor(i,t){super(i,t),this.plugin=t}display(){let{containerEl:i}=this;i.empty(),new u.Setting(i).setName("Default callout type").setDesc("The callout type pre-selected when the modal opens.").addDropdown(t=>{for(let e of p)t.addOption(e.type,e.label);t.setValue(this.plugin.settings.defaultCalloutType),t.onChange(async e=>{this.plugin.settings.defaultCalloutType=e,await this.plugin.saveSettings()})}),new u.Setting(i).setName("Remember last used type").setDesc("When enabled, the modal will default to the last callout type you inserted.").addToggle(t=>{t.setValue(this.plugin.settings.rememberLastType),t.onChange(async e=>{this.plugin.settings.rememberLastType=e,await this.plugin.saveSettings()})}),new u.Setting(i).setName("Auto-focus content").setDesc("Automatically focus the content textarea when the modal opens.").addToggle(t=>{t.setValue(this.plugin.settings.autoFocusContent),t.onChange(async e=>{this.plugin.settings.autoFocusContent=e,await this.plugin.saveSettings()})})}};
