/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var g=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var v=(r,o)=>{for(var t in o)g(r,t,{get:o[t],enumerable:!0})},S=(r,o,t,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of b(o))!T.call(r,i)&&i!==t&&g(r,i,{get:()=>o[i],enumerable:!(e=C(o,i))||e.enumerable});return r};var w=r=>S(g({},"__esModule",{value:!0}),r);var E={};v(E,{default:()=>h});module.exports=w(E);var u=require("obsidian");var f={defaultCalloutType:"note",rememberLastType:!1,autoFocusContent:!0,lastUsedType:"note"},p=[{type:"note",label:"Note",icon:"lucide-pencil",color:"var(--callout-default)",source:"builtin",aliases:[]},{type:"abstract",label:"Abstract",icon:"lucide-clipboard-list",color:"var(--callout-summary)",source:"builtin",aliases:["summary","tldr"]},{type:"info",label:"Info",icon:"lucide-info",color:"var(--callout-info)",source:"builtin",aliases:[]},{type:"todo",label:"Todo",icon:"lucide-check-circle-2",color:"var(--callout-todo)",source:"builtin",aliases:[]},{type:"important",label:"Important",icon:"lucide-flame",color:"var(--callout-important)",source:"builtin",aliases:[]},{type:"tip",label:"Tip",icon:"lucide-flame",color:"var(--callout-tip)",source:"builtin",aliases:["hint"]},{type:"success",label:"Success",icon:"lucide-check",color:"var(--callout-success)",source:"builtin",aliases:["check","done"]},{type:"question",label:"Question",icon:"lucide-help-circle",color:"var(--callout-question)",source:"builtin",aliases:["help","faq"]},{type:"warning",label:"Warning",icon:"lucide-alert-triangle",color:"var(--callout-warning)",source:"builtin",aliases:["caution","attention"]},{type:"failure",label:"Failure",icon:"lucide-x",color:"var(--callout-fail)",source:"builtin",aliases:["fail","missing"]},{type:"danger",label:"Danger",icon:"lucide-zap",color:"var(--callout-error)",source:"builtin",aliases:["error"]},{type:"bug",label:"Bug",icon:"lucide-bug",color:"var(--callout-bug)",source:"builtin",aliases:[]},{type:"example",label:"Example",icon:"lucide-list",color:"var(--callout-example)",source:"builtin",aliases:[]},{type:"quote",label:"Quote",icon:"lucide-quote",color:"var(--callout-quote)",source:"builtin",aliases:["cite"]}];var s=require("obsidian");var d=class extends s.Modal{constructor(t,e){var l,n;super(t);this.config=e;this.title="";this.content="";this.collapse="none";this.allCalloutOptions=[];this.type=e.defaultType,this.autoFocusContent=e.autoFocusContent,this.containerEl.addClass("insert-callout-modal"),this.prepareCalloutOptions();let i=this.getEditor();if(i){let a=i.getSelection();a&&(this.content=a)}this.allCalloutOptions.find(a=>a.type===this.type)||(this.type=(n=(l=this.allCalloutOptions[0])==null?void 0:l.type)!=null?n:"note")}getEditor(){var t,e;return(e=(t=this.app.workspace.getActiveViewOfType(s.MarkdownView))==null?void 0:t.editor)!=null?e:null}prepareCalloutOptions(){for(let t of p)if(this.allCalloutOptions.push({type:t.type,label:t.label,icon:t.icon,color:t.color,source:"builtin"}),t.aliases)for(let e of t.aliases)this.allCalloutOptions.push({type:e,label:`${t.label} (${e})`,icon:t.icon,color:t.color,source:"builtin"})}onOpen(){this.display()}display(){let{contentEl:t}=this;t.empty(),t.addEventListener("keydown",l=>{l.key==="Enter"&&(l.ctrlKey||l.metaKey)&&(l.preventDefault(),this.insertButton&&this.insertButton.click())});let e=t.createDiv("callout-type-container");this.iconContainerEl=e.createDiv("callout-icon-container"),new s.Setting(e).setName("Callout type").addDropdown(l=>{var n,a;for(let c of this.allCalloutOptions)l.addOption(c.type,c.label);this.allCalloutOptions.some(c=>c.type===this.type)||(this.type=(a=(n=this.allCalloutOptions[0])==null?void 0:n.type)!=null?a:"note"),l.setValue(this.type),l.onChange(c=>{this.type=c,this.updateIconAndColor(this.iconContainerEl,c)})}),this.updateIconAndColor(this.iconContainerEl,this.type),new s.Setting(t).setName("Title").setDesc("Optional, leave blank for default title").addText(l=>{l.setPlaceholder("Input title").setValue(this.title).onChange(n=>{this.title=n})}),new s.Setting(t).setName("Collapse state").addDropdown(l=>{l.addOption("none","Default").addOption("open","Open").addOption("closed","Closed").setValue(this.collapse).onChange(n=>{this.collapse=n})}),new s.Setting(t).setName("Content").addTextArea(l=>{l.setPlaceholder("Input content").setValue(this.content).onChange(n=>{this.content=n}),l.inputEl.rows=5,l.inputEl.cols=40,this.contentTextArea=l.inputEl}),t.createDiv("insert-callout-shortcut-hint").setText(`${s.Platform.isMacOS?"\u2318":"Ctrl"} + Enter to insert`),new s.Setting(t).addButton(l=>(l.setButtonText("Insert").setCta().onClick(()=>{this.insertCallout(),this.close()}),this.insertButton=l.buttonEl,l)).addButton(l=>(l.setButtonText("Cancel").setTooltip("Cancel").onClick(()=>this.close()),l)),this.autoFocusContent&&setTimeout(()=>{this.contentTextArea&&this.contentTextArea.focus()},10)}updateIconAndColor(t,e){if(!t)return;let i=this.allCalloutOptions.find(l=>l.type===e);t.empty(),i?((0,s.setIcon)(t,i.icon),t.style.setProperty("--callout-color",i.color)):((0,s.setIcon)(t,"lucide-alert-circle"),t.style.removeProperty("--callout-color"))}insertCallout(){let t=this.getEditor();if(!t)return;let e=`> [!${this.type}]`;this.collapse!=="none"&&(e+=this.collapse==="open"?"+":"-"),this.title&&(e+=` ${this.title}`),e+=`
> ${this.content.replace(/\n/g,`
> `)}`;let i=t.getCursor(),l=t.getLine(i.line),n=i.ch===0,a;if(t.getSelection()){!n&&l.trim().length>0&&(e=`
`+e);let c=t.getCursor("from");t.replaceSelection(e);let m=e.split(`
`).length;a={line:c.line+m,ch:0}}else{!n&&l.trim().length>0&&(e=`
`+e),t.replaceRange(e,i);let c=e.split(`
`).length;a={line:i.line+c,ch:0}}setTimeout(()=>{t.replaceRange(`
`,a),t.setCursor({line:a.line+1,ch:0}),t.focus()},0)}};var h=class extends u.Plugin{async onload(){await this.loadSettings(),this.addCommand({id:"insert-callout",name:"Insert callout",editorCallback:()=>{let o=this.settings.rememberLastType?this.settings.lastUsedType:this.settings.defaultCalloutType,t=new d(this.app,{defaultType:o,autoFocusContent:this.settings.autoFocusContent}),e=t.close.bind(t);t.close=()=>{this.settings.rememberLastType&&t.type&&(this.settings.lastUsedType=t.type,this.saveSettings()),e()},t.open()}}),this.addSettingTab(new y(this.app,this))}async loadSettings(){this.settings=Object.assign({},f,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},y=class extends u.PluginSettingTab{constructor(o,t){super(o,t),this.plugin=t}display(){let{containerEl:o}=this;o.empty(),new u.Setting(o).setName("Default callout type").setDesc("The callout type pre-selected when the modal opens.").addDropdown(t=>{for(let e of p)t.addOption(e.type,e.label);t.setValue(this.plugin.settings.defaultCalloutType),t.onChange(async e=>{this.plugin.settings.defaultCalloutType=e,await this.plugin.saveSettings()})}),new u.Setting(o).setName("Remember last used type").setDesc("When enabled, the modal will default to the last callout type you inserted.").addToggle(t=>{t.setValue(this.plugin.settings.rememberLastType),t.onChange(async e=>{this.plugin.settings.rememberLastType=e,await this.plugin.saveSettings()})}),new u.Setting(o).setName("Auto-focus content").setDesc("Automatically focus the content textarea when the modal opens.").addToggle(t=>{t.setValue(this.plugin.settings.autoFocusContent),t.onChange(async e=>{this.plugin.settings.autoFocusContent=e,await this.plugin.saveSettings()})})}};
